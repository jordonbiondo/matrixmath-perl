package MatrixMath::Controller::Example;
use WWW::DuckDuckGo;
use Mojo::Base 'Mojolicious::Controller';
use Mojo::Log;

# This action will render a template
sub welcome {
  my $self = shift;

  my $duck = WWW::DuckDuckGo->new;
  my $zci = $duck->zci('Meaning of life');

  my $results = {
    heading => $zci->heading,
    answer => $zci->answer
  };

  my $log = Mojo::Log->new;
  $log->warn(@{$zci->default_related_topics}
# print "Heading: ".$zci->heading if $zci->has_heading;
 
# print "The answer is: ".$zci->answer if $zci->has_answer;
 
  if ($zci->has_default_related_topics) {
      print @{$zci->default_related_topics};
      map {$_->url} @{$zci->default_related_topics};
      for (@{$zci->default_related_topics}) {
          # $results{'topics'} $_->url."\n";
      }
  }
 
# if (!$zci->has_default_related_topics and %{$zci->related_topics_sections}) {
#   print "Disambiguatious Related Topics:\n";
#   for (keys %{$zci->related_topics_sections}) {
#     print "  Related Topics Groupname: ".$_."\n";
#       for (@{$zci->related_topics_sections->{$_}}) {
#         print "  - ".$_->first_url->as_string."\n" if $_->has_first_url;
#       }
#     }
#   }
# }
  $self->render(json => $results);
}

1;
